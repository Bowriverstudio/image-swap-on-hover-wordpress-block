{"version":3,"sources":["@wordpress/components/src/popover/index.js"],"names":["classnames","useRef","useState","useEffect","focus","getRectangleFromRange","ESCAPE","deprecated","useViewportMatch","computePopoverPosition","withFocusReturn","withConstrainedTabbing","PopoverDetectOutside","IconButton","ScrollLock","IsolatedEventContainer","Slot","Fill","Consumer","Animate","FocusManaged","children","SLOT_NAME","computeAnchorRect","anchorRefFallback","anchorRect","getAnchorRect","anchorRef","shouldAnchorIncludePadding","current","window","Range","rect","getBoundingClientRect","withoutPadding","parentNode","addBuffer","verticalBuffer","horizontalBuffer","x","left","y","top","width","height","right","bottom","element","getComputedStyle","paddingTop","paddingBottom","paddingLeft","paddingRight","parseInt","useFocusContentOnMount","focusOnMount","contentRef","focusTimeout","setTimeout","firstTabbable","tabbable","find","clearTimeout","setAttribute","name","value","hasAttribute","removeAttribute","getAttribute","setStyle","property","style","setClass","toggle","classList","contains","add","remove","Popover","headerTitle","onClose","onKeyDown","className","noArrow","position","range","anchorVerticalBuffer","anchorHorizontalBuffer","expandOnMobile","animate","onClickOutside","onFocusOutside","contentProps","containerRef","contentRect","isMobileViewport","animateOrigin","setAnimateOrigin","isExpanded","containerEl","contentEl","refresh","anchor","popoverTop","popoverLeft","xAxis","yAxis","contentHeight","contentWidth","yAxisMapping","xAxisMapping","animateYAxis","animateXAxis","timeoutId","intervalHandle","setInterval","addEventListener","clearInterval","removeEventListener","maybeClose","event","keyCode","stopPropagation","handleOnFocusOutside","clickEvent","MouseEvent","error","document","createEvent","initMouseEvent","Object","defineProperty","get","relatedTarget","alternative","content","origin","animateClassName","getSlot","PopoverContainer"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useRef, useState, useEffect } from '@wordpress/element';\nimport { focus, getRectangleFromRange } from '@wordpress/dom';\nimport { ESCAPE } from '@wordpress/keycodes';\nimport deprecated from '@wordpress/deprecated';\nimport { useViewportMatch } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { computePopoverPosition } from './utils';\nimport withFocusReturn from '../higher-order/with-focus-return';\nimport withConstrainedTabbing from '../higher-order/with-constrained-tabbing';\nimport PopoverDetectOutside from './detect-outside';\nimport IconButton from '../icon-button';\nimport ScrollLock from '../scroll-lock';\nimport IsolatedEventContainer from '../isolated-event-container';\nimport { Slot, Fill, Consumer } from '../slot-fill';\nimport Animate from '../animate';\n\nconst FocusManaged = withConstrainedTabbing( withFocusReturn( ( { children } ) => children ) );\n\n/**\n * Name of slot in which popover should fill.\n *\n * @type {string}\n */\nconst SLOT_NAME = 'Popover';\n\nfunction computeAnchorRect(\n\tanchorRefFallback,\n\tanchorRect,\n\tgetAnchorRect,\n\tanchorRef = false,\n\tshouldAnchorIncludePadding\n) {\n\tif ( anchorRect ) {\n\t\treturn anchorRect;\n\t}\n\n\tif ( getAnchorRect ) {\n\t\tif ( ! anchorRefFallback.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn getAnchorRect( anchorRefFallback.current );\n\t}\n\n\tif ( anchorRef !== false ) {\n\t\tif ( ! anchorRef ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( anchorRef instanceof window.Range ) {\n\t\t\treturn getRectangleFromRange( anchorRef );\n\t\t}\n\n\t\tconst rect = anchorRef.getBoundingClientRect();\n\n\t\tif ( shouldAnchorIncludePadding ) {\n\t\t\treturn rect;\n\t\t}\n\n\t\treturn withoutPadding( rect, anchorRef );\n\t}\n\n\tif ( ! anchorRefFallback.current ) {\n\t\treturn;\n\t}\n\n\tconst { parentNode } = anchorRefFallback.current;\n\tconst rect = parentNode.getBoundingClientRect();\n\n\tif ( shouldAnchorIncludePadding ) {\n\t\treturn rect;\n\t}\n\n\treturn withoutPadding( rect, parentNode );\n}\n\nfunction addBuffer( rect, verticalBuffer = 0, horizontalBuffer = 0 ) {\n\treturn {\n\t\tx: rect.left - horizontalBuffer,\n\t\ty: rect.top - verticalBuffer,\n\t\twidth: rect.width + ( 2 * horizontalBuffer ),\n\t\theight: rect.height + ( 2 * verticalBuffer ),\n\t\tleft: rect.left - horizontalBuffer,\n\t\tright: rect.right + horizontalBuffer,\n\t\ttop: rect.top - verticalBuffer,\n\t\tbottom: rect.bottom + verticalBuffer,\n\t};\n}\n\nfunction withoutPadding( rect, element ) {\n\tconst {\n\t\tpaddingTop,\n\t\tpaddingBottom,\n\t\tpaddingLeft,\n\t\tpaddingRight,\n\t} = window.getComputedStyle( element );\n\tconst top = paddingTop ? parseInt( paddingTop, 10 ) : 0;\n\tconst bottom = paddingBottom ? parseInt( paddingBottom, 10 ) : 0;\n\tconst left = paddingLeft ? parseInt( paddingLeft, 10 ) : 0;\n\tconst right = paddingRight ? parseInt( paddingRight, 10 ) : 0;\n\n\treturn {\n\t\tx: rect.left + left,\n\t\ty: rect.top + top,\n\t\twidth: rect.width - left - right,\n\t\theight: rect.height - top - bottom,\n\t\tleft: rect.left + left,\n\t\tright: rect.right - right,\n\t\ttop: rect.top + top,\n\t\tbottom: rect.bottom - bottom,\n\t};\n}\n\n/**\n * Hook used to focus the first tabbable element on mount.\n *\n * @param {boolean|string} focusOnMount Focus on mount mode.\n * @param {Object}         contentRef   Reference to the popover content element.\n */\nfunction useFocusContentOnMount( focusOnMount, contentRef ) {\n\t// Focus handling\n\tuseEffect( () => {\n\t\t/*\n\t\t * Without the setTimeout, the dom node is not being focused. Related:\n\t\t * https://stackoverflow.com/questions/35522220/react-ref-with-focus-doesnt-work-without-settimeout-my-example\n\t\t *\n\t\t * TODO: Treat the cause, not the symptom.\n\t\t */\n\t\tconst focusTimeout = setTimeout( () => {\n\t\t\tif ( ! focusOnMount || ! contentRef.current ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( focusOnMount === 'firstElement' ) {\n\t\t\t// Find first tabbable node within content and shift focus, falling\n\t\t\t// back to the popover panel itself.\n\t\t\t\tconst firstTabbable = focus.tabbable.find( contentRef.current )[ 0 ];\n\n\t\t\t\tif ( firstTabbable ) {\n\t\t\t\t\tfirstTabbable.focus();\n\t\t\t\t} else {\n\t\t\t\t\tcontentRef.current.focus();\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( focusOnMount === 'container' ) {\n\t\t\t// Focus the popover panel itself so items in the popover are easily\n\t\t\t// accessed via keyboard navigation.\n\t\t\t\tcontentRef.current.focus();\n\t\t\t}\n\t\t}, 0 );\n\n\t\treturn () => clearTimeout( focusTimeout );\n\t}, [] );\n}\n\n/**\n * Sets or removes an element attribute.\n *\n * @param {Element} element The element to modify.\n * @param {string}  name    The attribute name to set or remove.\n * @param {?string} value   The value to set. A falsy value will remove the\n *                          attribute.\n */\nfunction setAttribute( element, name, value ) {\n\tif ( ! value ) {\n\t\tif ( element.hasAttribute( name ) ) {\n\t\t\telement.removeAttribute( name );\n\t\t}\n\t} else if ( element.getAttribute( name ) !== value ) {\n\t\telement.setAttribute( name, value );\n\t}\n}\n\n/**\n * Sets or removes an element style property.\n *\n * @param {Element} element  The element to modify.\n * @param {string}  property The property to set or remove.\n * @param {?string} value    The value to set. A falsy value will remove the\n *                           property.\n */\nfunction setStyle( element, property, value = '' ) {\n\tif ( element.style[ property ] !== value ) {\n\t\telement.style[ property ] = value;\n\t}\n}\n\n/**\n * Sets or removes an element class.\n *\n * @param {Element} element The element to modify.\n * @param {string}  name    The class to set or remove.\n * @param {boolean} toggle  True to set the class, false to remove.\n */\nfunction setClass( element, name, toggle ) {\n\tif ( toggle ) {\n\t\tif ( ! element.classList.contains( name ) ) {\n\t\t\telement.classList.add( name );\n\t\t}\n\t} else if ( element.classList.contains( name ) ) {\n\t\telement.classList.remove( name );\n\t}\n}\n\nconst Popover = ( {\n\theaderTitle,\n\tonClose,\n\tonKeyDown,\n\tchildren,\n\tclassName,\n\tnoArrow = false,\n\t// Disable reason: We generate the `...contentProps` rest as remainder\n\t// of props which aren't explicitly handled by this component.\n\t/* eslint-disable no-unused-vars */\n\tposition = 'top',\n\trange,\n\tfocusOnMount = 'firstElement',\n\tanchorRef,\n\tshouldAnchorIncludePadding,\n\tanchorVerticalBuffer,\n\tanchorHorizontalBuffer,\n\tanchorRect,\n\tgetAnchorRect,\n\texpandOnMobile,\n\tanimate = true,\n\tonClickOutside,\n\tonFocusOutside,\n\t/* eslint-enable no-unused-vars */\n\t...contentProps\n} ) => {\n\tconst anchorRefFallback = useRef( null );\n\tconst contentRef = useRef( null );\n\tconst containerRef = useRef();\n\tconst contentRect = useRef();\n\tconst isMobileViewport = useViewportMatch( 'medium', '<' );\n\tconst [ animateOrigin, setAnimateOrigin ] = useState();\n\tconst isExpanded = expandOnMobile && isMobileViewport;\n\n\tnoArrow = isExpanded || noArrow;\n\n\tuseEffect( () => {\n\t\tconst containerEl = containerRef.current;\n\t\tconst contentEl = contentRef.current;\n\n\t\tif ( isExpanded ) {\n\t\t\tsetClass( containerEl, 'is-without-arrow', noArrow );\n\t\t\tsetAttribute( containerEl, 'data-x-axis' );\n\t\t\tsetAttribute( containerEl, 'data-y-axis' );\n\t\t\tsetStyle( containerEl, 'top' );\n\t\t\tsetStyle( containerEl, 'left' );\n\t\t\tsetStyle( contentEl, 'maxHeight' );\n\t\t\tsetStyle( contentEl, 'maxWidth' );\n\t\t\treturn;\n\t\t}\n\n\t\tconst refresh = () => {\n\t\t\tlet anchor = computeAnchorRect(\n\t\t\t\tanchorRefFallback,\n\t\t\t\tanchorRect,\n\t\t\t\tgetAnchorRect,\n\t\t\t\tanchorRef,\n\t\t\t\tshouldAnchorIncludePadding\n\t\t\t);\n\n\t\t\tif ( ! anchor ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tanchor = addBuffer(\n\t\t\t\tanchor,\n\t\t\t\tanchorVerticalBuffer,\n\t\t\t\tanchorHorizontalBuffer\n\t\t\t);\n\n\t\t\tif ( ! contentRect.current ) {\n\t\t\t\tcontentRect.current = contentEl.getBoundingClientRect();\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tpopoverTop,\n\t\t\t\tpopoverLeft,\n\t\t\t\txAxis,\n\t\t\t\tyAxis,\n\t\t\t\tcontentHeight,\n\t\t\t\tcontentWidth,\n\t\t\t} = computePopoverPosition( anchor, contentRect.current, position );\n\n\t\t\tsetClass( containerEl, 'is-without-arrow', noArrow || ( xAxis === 'center' && yAxis === 'middle' ) );\n\t\t\tsetAttribute( containerEl, 'data-x-axis', xAxis );\n\t\t\tsetAttribute( containerEl, 'data-y-axis', yAxis );\n\t\t\tsetStyle( containerEl, 'top', typeof popoverTop === 'number' ? popoverTop + 'px' : '' );\n\t\t\tsetStyle( containerEl, 'left', typeof popoverLeft === 'number' ? popoverLeft + 'px' : '' );\n\t\t\tsetStyle( contentEl, 'maxHeight', typeof contentHeight === 'number' ? contentHeight + 'px' : '' );\n\t\t\tsetStyle( contentEl, 'maxWidth', typeof contentWidth === 'number' ? contentWidth + 'px' : '' );\n\n\t\t\t// Compute the animation position\n\t\t\tconst yAxisMapping = {\n\t\t\t\ttop: 'bottom',\n\t\t\t\tbottom: 'top',\n\t\t\t};\n\t\t\tconst xAxisMapping = {\n\t\t\t\tleft: 'right',\n\t\t\t\tright: 'left',\n\t\t\t};\n\t\t\tconst animateYAxis = yAxisMapping[ yAxis ] || 'middle';\n\t\t\tconst animateXAxis = xAxisMapping[ xAxis ] || 'center';\n\n\t\t\tsetAnimateOrigin( animateXAxis + ' ' + animateYAxis );\n\t\t};\n\n\t\t// Height may still adjust between now and the next tick.\n\t\tconst timeoutId = window.setTimeout( refresh );\n\n\t\t/*\n\t\t * There are sometimes we need to reposition or resize the popover that\n\t\t * are not handled by the resize/scroll window events (i.e. CSS changes\n\t\t * in the layout that changes the position of the anchor).\n\t\t *\n\t\t * For these situations, we refresh the popover every 0.5s\n\t\t */\n\t\tconst intervalHandle = window.setInterval( refresh, 500 );\n\t\twindow.addEventListener( 'resize', refresh );\n\t\twindow.addEventListener( 'scroll', refresh, true );\n\n\t\treturn () => {\n\t\t\twindow.clearTimeout( timeoutId );\n\t\t\twindow.clearInterval( intervalHandle );\n\t\t\twindow.removeEventListener( 'resize', refresh );\n\t\t\twindow.removeEventListener( 'scroll', refresh, true );\n\t\t};\n\t}, [\n\t\tisExpanded,\n\t\tanchorRect,\n\t\tgetAnchorRect,\n\t\tanchorRef,\n\t\tshouldAnchorIncludePadding,\n\t\tanchorVerticalBuffer,\n\t\tanchorHorizontalBuffer,\n\t\tposition,\n\t] );\n\n\tuseFocusContentOnMount( focusOnMount, contentRef );\n\n\t// Event handlers\n\tconst maybeClose = ( event ) => {\n\t\t// Close on escape\n\t\tif ( event.keyCode === ESCAPE && onClose ) {\n\t\t\tevent.stopPropagation();\n\t\t\tonClose();\n\t\t}\n\n\t\t// Preserve original content prop behavior\n\t\tif ( onKeyDown ) {\n\t\t\tonKeyDown( event );\n\t\t}\n\t};\n\n\t/**\n\t * Shims an onFocusOutside callback to be compatible with a deprecated\n\t * onClickOutside prop function, if provided.\n\t *\n\t * @param {FocusEvent} event Focus event from onFocusOutside.\n\t */\n\tfunction handleOnFocusOutside( event ) {\n\t\t// Defer to given `onFocusOutside` if specified. Call `onClose` only if\n\t\t// both `onFocusOutside` and `onClickOutside` are unspecified. Doing so\n\t\t// assures backwards-compatibility for prior `onClickOutside` default.\n\t\tif ( onFocusOutside ) {\n\t\t\tonFocusOutside( event );\n\t\t\treturn;\n\t\t} else if ( ! onClickOutside ) {\n\t\t\tif ( onClose ) {\n\t\t\t\tonClose();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// Simulate MouseEvent using FocusEvent#relatedTarget as emulated click\n\t\t// target. MouseEvent constructor is unsupported in Internet Explorer.\n\t\tlet clickEvent;\n\t\ttry {\n\t\t\tclickEvent = new window.MouseEvent( 'click' );\n\t\t} catch ( error ) {\n\t\t\tclickEvent = document.createEvent( 'MouseEvent' );\n\t\t\tclickEvent.initMouseEvent( 'click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null );\n\t\t}\n\n\t\tObject.defineProperty( clickEvent, 'target', {\n\t\t\tget: () => event.relatedTarget,\n\t\t} );\n\n\t\tdeprecated( 'Popover onClickOutside prop', {\n\t\t\talternative: 'onFocusOutside',\n\t\t} );\n\n\t\tonClickOutside( clickEvent );\n\t}\n\n\t// Disable reason: We care to capture the _bubbled_ events from inputs\n\t// within popover as inferring close intent.\n\n\tlet content = (\n\t\t<PopoverDetectOutside onFocusOutside={ handleOnFocusOutside }>\n\t\t\t<Animate\n\t\t\t\ttype={ animate && animateOrigin ? 'appear' : null }\n\t\t\t\toptions={ { origin: animateOrigin } }\n\t\t\t>\n\t\t\t\t{ ( { className: animateClassName } ) => (\n\t\t\t\t\t<IsolatedEventContainer\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'components-popover',\n\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\tanimateClassName,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'is-expanded': isExpanded,\n\t\t\t\t\t\t\t\t'is-without-arrow': noArrow,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ ...contentProps }\n\t\t\t\t\t\tonKeyDown={ maybeClose }\n\t\t\t\t\t\tref={ containerRef }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ isExpanded && (\n\t\t\t\t\t\t\t<div className=\"components-popover__header\">\n\t\t\t\t\t\t\t\t<span className=\"components-popover__header-title\">\n\t\t\t\t\t\t\t\t\t{ headerTitle }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<IconButton className=\"components-popover__close\" icon=\"no-alt\" onClick={ onClose } />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref={ contentRef }\n\t\t\t\t\t\t\tclassName=\"components-popover__content\"\n\t\t\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</IsolatedEventContainer>\n\t\t\t\t) }\n\t\t\t</Animate>\n\t\t</PopoverDetectOutside>\n\t);\n\n\t// Apply focus to element as long as focusOnMount is truthy; false is\n\t// the only \"disabled\" value.\n\tif ( focusOnMount ) {\n\t\tcontent = <FocusManaged>{ content }</FocusManaged>;\n\t}\n\n\treturn (\n\t\t<Consumer>\n\t\t\t{ ( { getSlot } ) => {\n\t\t\t\t// In case there is no slot context in which to render,\n\t\t\t\t// default to an in-place rendering.\n\t\t\t\tif ( getSlot && getSlot( SLOT_NAME ) ) {\n\t\t\t\t\tcontent = <Fill name={ SLOT_NAME }>{ content }</Fill>;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<span ref={ anchorRefFallback }>\n\t\t\t\t\t\t{ content }\n\t\t\t\t\t\t{ isMobileViewport && expandOnMobile && <ScrollLock /> }\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\t} }\n\t\t</Consumer>\n\t);\n};\n\nconst PopoverContainer = Popover;\n\nPopoverContainer.Slot = () => <Slot bubblesVirtually name={ SLOT_NAME } />;\n\nexport default PopoverContainer;\n"]}