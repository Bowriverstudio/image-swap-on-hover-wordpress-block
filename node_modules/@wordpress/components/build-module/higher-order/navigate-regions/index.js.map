{"version":3,"sources":["@wordpress/components/src/higher-order/navigate-regions/index.js"],"names":["classnames","Component","createHigherOrderComponent","rawShortcut","KeyboardShortcuts","WrappedComponent","arguments","bindContainer","bind","focusNextRegion","focusRegion","focusPreviousRegion","onClick","state","isFocusingRegions","ref","container","offset","regions","Array","from","querySelectorAll","length","nextRegion","selectedIndex","indexOf","document","activeElement","nextIndex","focus","setState","className","access","props"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { rawShortcut } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport KeyboardShortcuts from '../../keyboard-shortcuts';\n\nexport default createHigherOrderComponent(\n\t( WrappedComponent ) => {\n\t\treturn class extends Component {\n\t\t\tconstructor() {\n\t\t\t\tsuper( ...arguments );\n\t\t\t\tthis.bindContainer = this.bindContainer.bind( this );\n\t\t\t\tthis.focusNextRegion = this.focusRegion.bind( this, 1 );\n\t\t\t\tthis.focusPreviousRegion = this.focusRegion.bind( this, -1 );\n\t\t\t\tthis.onClick = this.onClick.bind( this );\n\t\t\t\tthis.state = {\n\t\t\t\t\tisFocusingRegions: false,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tbindContainer( ref ) {\n\t\t\t\tthis.container = ref;\n\t\t\t}\n\n\t\t\tfocusRegion( offset ) {\n\t\t\t\tconst regions = Array.from( this.container.querySelectorAll( '[role=\"region\"]' ) );\n\t\t\t\tif ( ! regions.length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet nextRegion = regions[ 0 ];\n\t\t\t\tconst selectedIndex = regions.indexOf( document.activeElement );\n\t\t\t\tif ( selectedIndex !== -1 ) {\n\t\t\t\t\tlet nextIndex = selectedIndex + offset;\n\t\t\t\t\tnextIndex = nextIndex === -1 ? regions.length - 1 : nextIndex;\n\t\t\t\t\tnextIndex = nextIndex === regions.length ? 0 : nextIndex;\n\t\t\t\t\tnextRegion = regions[ nextIndex ];\n\t\t\t\t}\n\n\t\t\t\tnextRegion.focus();\n\n\t\t\t\tif ( ! this.state.isFocusingRegions ) {\n\t\t\t\t\tthis.setState( { isFocusingRegions: true } );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tonClick() {\n\t\t\t\tif ( this.state.isFocusingRegions ) {\n\t\t\t\t\tthis.setState( { isFocusingRegions: false } );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\tconst className = classnames( 'components-navigate-regions', {\n\t\t\t\t\t'is-focusing-regions': this.state.isFocusingRegions,\n\t\t\t\t} );\n\n\t\t\t\t// Disable reason: Clicking the editor should dismiss the regions focus style\n\t\t\t\t/* eslint-disable jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */\n\t\t\t\treturn (\n\t\t\t\t\t<div ref={ this.bindContainer } className={ className } onClick={ this.onClick }>\n\t\t\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\t\t\tbindGlobal\n\t\t\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t\t\t'ctrl+`': this.focusNextRegion,\n\t\t\t\t\t\t\t\t[ rawShortcut.access( 'n' ) ]: this.focusNextRegion,\n\t\t\t\t\t\t\t\t'ctrl+shift+`': this.focusPreviousRegion,\n\t\t\t\t\t\t\t\t[ rawShortcut.access( 'p' ) ]: this.focusPreviousRegion,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<WrappedComponent { ...this.props } />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\t/* eslint-enable jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */\n\t\t\t}\n\t\t};\n\t}, 'navigateRegions'\n);\n"]}