{"version":3,"sources":["@wordpress/block-library/src/navigation/edit.js"],"names":["escape","upperFirst","classnames","useMemo","Fragment","useRef","InnerBlocks","InspectorControls","BlockControls","FontSizePicker","withFontSizes","__experimentalUseColors","createBlock","useDispatch","withSelect","withDispatch","Button","PanelBody","Placeholder","Spinner","ToggleControl","Toolbar","ToolbarGroup","compose","__","useBlockNavigator","BlockNavigationList","BlockColorsStyleSelector","navIcons","Navigation","attributes","clientId","fontSize","hasExistingNavItems","hasResolvedPages","isRequestingPages","pages","setAttributes","setFontSize","updateNavItemBlocks","ref","selectBlock","name","property","className","contrastCheckers","backgroundColor","textColor","size","colorDetector","targetRef","colorPanelProps","initialOpen","TextColor","BackgroundColor","InspectorControlsColorPanel","ColorPanel","navigatorToolbarButton","navigatorModal","defaultPagesNavigationItems","map","title","type","url","link","id","label","rendered","raw","opensInNewTab","handleItemsAlignment","align","itemsJustification","undefined","handleCreateEmpty","emptyNavLinkBlock","handleCreateFromExistingPages","hasPages","length","blockClassNames","class","blockInlineStyles","justifyLeftIcon","icon","isActive","onClick","justifyCenterIcon","justifyRightIcon","showSubmenuIcon","value","select","innerBlocks","getBlocks","filterDefaultPages","parent","order","orderby","pagesSelect","getEntityRecords","isResolving","hasFinishedResolution","dispatch","blocks","replaceInnerBlocks"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { escape, upperFirst } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo, Fragment, useRef } from '@wordpress/element';\nimport {\n\tInnerBlocks,\n\tInspectorControls,\n\tBlockControls,\n\tFontSizePicker,\n\twithFontSizes,\n\t__experimentalUseColors,\n} from '@wordpress/block-editor';\n\nimport { createBlock } from '@wordpress/blocks';\nimport { useDispatch, withSelect, withDispatch } from '@wordpress/data';\nimport {\n\tButton,\n\tPanelBody,\n\tPlaceholder,\n\tSpinner,\n\tToggleControl,\n\tToolbar,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\n\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useBlockNavigator from './use-block-navigator';\nimport BlockNavigationList from './block-navigation-list';\nimport BlockColorsStyleSelector from './block-colors-selector';\nimport * as navIcons from './icons';\n\nfunction Navigation( {\n\tattributes,\n\tclientId,\n\tfontSize,\n\thasExistingNavItems,\n\thasResolvedPages,\n\tisRequestingPages,\n\tpages,\n\tsetAttributes,\n\tsetFontSize,\n\tupdateNavItemBlocks,\n} ) {\n\t//\n\t// HOOKS\n\t//\n\t/* eslint-disable @wordpress/no-unused-vars-before-return */\n\tconst ref = useRef();\n\tconst { selectBlock } = useDispatch( 'core/block-editor' );\n\n\tconst {\n\t\tTextColor,\n\t\tBackgroundColor,\n\t\tInspectorControlsColorPanel,\n\t\tColorPanel,\n\t} = __experimentalUseColors(\n\t\t[\n\t\t\t{ name: 'textColor', property: 'color' },\n\t\t\t{ name: 'backgroundColor', className: 'background-color' },\n\t\t],\n\t\t{\n\t\t\tcontrastCheckers: [\n\t\t\t\t{\n\t\t\t\t\tbackgroundColor: true,\n\t\t\t\t\ttextColor: true,\n\t\t\t\t\tfontSize: fontSize.size,\n\t\t\t\t},\n\t\t\t],\n\t\t\tcolorDetector: { targetRef: ref },\n\t\t\tcolorPanelProps: {\n\t\t\t\tinitialOpen: true,\n\t\t\t},\n\t\t},\n\t\t[ fontSize.size ]\n\t);\n\n\t/* eslint-enable @wordpress/no-unused-vars-before-return */\n\tconst { navigatorToolbarButton, navigatorModal } = useBlockNavigator(\n\t\tclientId\n\t);\n\n\t// Builds navigation links from default Pages.\n\tconst defaultPagesNavigationItems = useMemo( () => {\n\t\tif ( ! pages ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn pages.map( ( { title, type, link: url, id } ) =>\n\t\t\tcreateBlock( 'core/navigation-link', {\n\t\t\t\ttype,\n\t\t\t\tid,\n\t\t\t\turl,\n\t\t\t\tlabel: ! title.rendered\n\t\t\t\t\t? __( '(no title)' )\n\t\t\t\t\t: escape( title.rendered ),\n\t\t\t\ttitle: ! title.raw ? __( '(no title)' ) : escape( title.raw ),\n\t\t\t\topensInNewTab: false,\n\t\t\t} )\n\t\t);\n\t}, [ pages ] );\n\n\t//\n\t// HANDLERS\n\t//\n\tfunction handleItemsAlignment( align ) {\n\t\treturn () => {\n\t\t\tconst itemsJustification =\n\t\t\t\tattributes.itemsJustification === align ? undefined : align;\n\t\t\tsetAttributes( {\n\t\t\t\titemsJustification,\n\t\t\t} );\n\t\t};\n\t}\n\n\tfunction handleCreateEmpty() {\n\t\tconst emptyNavLinkBlock = createBlock( 'core/navigation-link' );\n\t\tupdateNavItemBlocks( [ emptyNavLinkBlock ] );\n\t}\n\n\tfunction handleCreateFromExistingPages() {\n\t\tupdateNavItemBlocks( defaultPagesNavigationItems );\n\t\tselectBlock( clientId );\n\t}\n\n\tconst hasPages = hasResolvedPages && pages && pages.length;\n\n\tconst blockClassNames = classnames( 'wp-block-navigation', {\n\t\t[ `items-justification-${ attributes.itemsJustification }` ]: attributes.itemsJustification,\n\t\t[ fontSize.class ]: fontSize.class,\n\t} );\n\tconst blockInlineStyles = {\n\t\tfontSize: fontSize.size ? fontSize.size + 'px' : undefined,\n\t};\n\n\t// If we don't have existing items or the User hasn't\n\t// indicated they want to automatically add top level Pages\n\t// then show the Placeholder\n\tif ( ! hasExistingNavItems ) {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Placeholder\n\t\t\t\t\tclassName=\"wp-block-navigation-placeholder\"\n\t\t\t\t\ticon=\"menu\"\n\t\t\t\t\tlabel={ __( 'Navigation' ) }\n\t\t\t\t\tinstructions={ __(\n\t\t\t\t\t\t'Create a Navigation from all existing pages, or create an empty one.'\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\tclassName=\"wp-block-navigation-placeholder__buttons\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\tclassName=\"wp-block-navigation-placeholder__button\"\n\t\t\t\t\t\t\tonClick={ handleCreateFromExistingPages }\n\t\t\t\t\t\t\tdisabled={ ! hasPages }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create from all top-level pages' ) }\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisLink\n\t\t\t\t\t\t\tclassName=\"wp-block-navigation-placeholder__button\"\n\t\t\t\t\t\t\tonClick={ handleCreateEmpty }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create empty' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</Placeholder>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\t// UI State: rendered Block UI\n\treturn (\n\t\t<Fragment>\n\t\t\t<BlockControls>\n\t\t\t\t<Toolbar\n\t\t\t\t\ticon={\n\t\t\t\t\t\tattributes.itemsJustification\n\t\t\t\t\t\t\t? navIcons[\n\t\t\t\t\t\t\t\t\t`justify${ upperFirst(\n\t\t\t\t\t\t\t\t\t\tattributes.itemsJustification\n\t\t\t\t\t\t\t\t\t) }Icon`\n\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t: navIcons.justifyLeftIcon\n\t\t\t\t\t}\n\t\t\t\t\tlabel={ __( 'Change items justification' ) }\n\t\t\t\t\tisCollapsed\n\t\t\t\t\tcontrols={ [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: navIcons.justifyLeftIcon,\n\t\t\t\t\t\t\ttitle: __( 'Justify items left' ),\n\t\t\t\t\t\t\tisActive: 'left' === attributes.itemsJustification,\n\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'left' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: navIcons.justifyCenterIcon,\n\t\t\t\t\t\t\ttitle: __( 'Justify items center' ),\n\t\t\t\t\t\t\tisActive:\n\t\t\t\t\t\t\t\t'center' === attributes.itemsJustification,\n\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'center' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: navIcons.justifyRightIcon,\n\t\t\t\t\t\t\ttitle: __( 'Justify items right' ),\n\t\t\t\t\t\t\tisActive: 'right' === attributes.itemsJustification,\n\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'right' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t] }\n\t\t\t\t/>\n\t\t\t\t<ToolbarGroup>{ navigatorToolbarButton }</ToolbarGroup>\n\n\t\t\t\t<BlockColorsStyleSelector\n\t\t\t\t\tTextColor={ TextColor }\n\t\t\t\t\tBackgroundColor={ BackgroundColor }\n\t\t\t\t>\n\t\t\t\t\t{ ColorPanel }\n\t\t\t\t</BlockColorsStyleSelector>\n\t\t\t</BlockControls>\n\t\t\t{ navigatorModal }\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Navigation Structure' ) }>\n\t\t\t\t\t<BlockNavigationList clientId={ clientId } />\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={ __( 'Text settings' ) }>\n\t\t\t\t\t<FontSizePicker\n\t\t\t\t\t\tvalue={ fontSize.size }\n\t\t\t\t\t\tonChange={ setFontSize }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t{ InspectorControlsColorPanel }\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Display settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tchecked={ attributes.showSubmenuIcon }\n\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\tsetAttributes( { showSubmenuIcon: value } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tlabel={ __( 'Show submenu icon for top-level items' ) }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<TextColor>\n\t\t\t\t<BackgroundColor>\n\t\t\t\t\t<div\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\tclassName={ blockClassNames }\n\t\t\t\t\t\tstyle={ blockInlineStyles }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ! hasExistingNavItems && isRequestingPages && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Spinner /> { __( 'Loading Navigation…' ) }{ ' ' }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t<InnerBlocks\n\t\t\t\t\t\t\tallowedBlocks={ [ 'core/navigation-link' ] }\n\t\t\t\t\t\t\ttemplateInsertUpdatesSelection={ false }\n\t\t\t\t\t\t\t__experimentalMoverDirection={ 'horizontal' }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</BackgroundColor>\n\t\t\t</TextColor>\n\t\t</Fragment>\n\t);\n}\n\nexport default compose( [\n\twithFontSizes( 'fontSize' ),\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst innerBlocks = select( 'core/block-editor' ).getBlocks( clientId );\n\n\t\tconst filterDefaultPages = {\n\t\t\tparent: 0,\n\t\t\torder: 'asc',\n\t\t\torderby: 'id',\n\t\t};\n\n\t\tconst pagesSelect = [\n\t\t\t'core',\n\t\t\t'getEntityRecords',\n\t\t\t[ 'postType', 'page', filterDefaultPages ],\n\t\t];\n\n\t\treturn {\n\t\t\thasExistingNavItems: !! innerBlocks.length,\n\t\t\tpages: select( 'core' ).getEntityRecords(\n\t\t\t\t'postType',\n\t\t\t\t'page',\n\t\t\t\tfilterDefaultPages\n\t\t\t),\n\t\t\tisRequestingPages: select( 'core/data' ).isResolving(\n\t\t\t\t...pagesSelect\n\t\t\t),\n\t\t\thasResolvedPages: select( 'core/data' ).hasFinishedResolution(\n\t\t\t\t...pagesSelect\n\t\t\t),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\treturn {\n\t\t\tupdateNavItemBlocks( blocks ) {\n\t\t\t\tdispatch( 'core/block-editor' ).replaceInnerBlocks(\n\t\t\t\t\tclientId,\n\t\t\t\t\tblocks\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\t} ),\n] )( Navigation );\n"]}