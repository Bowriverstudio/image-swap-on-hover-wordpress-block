{"version":3,"sources":["@wordpress/block-library/src/navigation/edit.js"],"names":["Navigation","attributes","clientId","fontSize","hasExistingNavItems","hasResolvedPages","isRequestingPages","pages","setAttributes","setFontSize","updateNavItemBlocks","ref","selectBlock","name","property","className","contrastCheckers","backgroundColor","textColor","size","colorDetector","targetRef","colorPanelProps","initialOpen","TextColor","BackgroundColor","InspectorControlsColorPanel","ColorPanel","navigatorToolbarButton","navigatorModal","defaultPagesNavigationItems","map","title","type","url","link","id","label","rendered","raw","opensInNewTab","handleItemsAlignment","align","itemsJustification","undefined","handleCreateEmpty","emptyNavLinkBlock","handleCreateFromExistingPages","hasPages","length","blockClassNames","class","blockInlineStyles","navIcons","justifyLeftIcon","icon","isActive","onClick","justifyCenterIcon","justifyRightIcon","showSubmenuIcon","value","select","innerBlocks","getBlocks","filterDefaultPages","parent","order","orderby","pagesSelect","getEntityRecords","isResolving","hasFinishedResolution","dispatch","blocks","replaceInnerBlocks"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { escape, upperFirst } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo, Fragment, useRef } from '@wordpress/element';\nimport {\n\tInnerBlocks,\n\tInspectorControls,\n\tBlockControls,\n\tFontSizePicker,\n\twithFontSizes,\n\t__experimentalUseColors,\n} from '@wordpress/block-editor';\n\nimport { createBlock } from '@wordpress/blocks';\nimport { useDispatch, withSelect, withDispatch } from '@wordpress/data';\nimport {\n\tButton,\n\tPanelBody,\n\tPlaceholder,\n\tSpinner,\n\tToggleControl,\n\tToolbar,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\n\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useBlockNavigator from './use-block-navigator';\nimport BlockNavigationList from './block-navigation-list';\nimport BlockColorsStyleSelector from './block-colors-selector';\nimport * as navIcons from './icons';\n\nfunction Navigation( {\n\tattributes,\n\tclientId,\n\tfontSize,\n\thasExistingNavItems,\n\thasResolvedPages,\n\tisRequestingPages,\n\tpages,\n\tsetAttributes,\n\tsetFontSize,\n\tupdateNavItemBlocks,\n} ) {\n\t//\n\t// HOOKS\n\t//\n\t/* eslint-disable @wordpress/no-unused-vars-before-return */\n\tconst ref = useRef();\n\tconst { selectBlock } = useDispatch( 'core/block-editor' );\n\n\tconst {\n\t\tTextColor,\n\t\tBackgroundColor,\n\t\tInspectorControlsColorPanel,\n\t\tColorPanel,\n\t} = __experimentalUseColors(\n\t\t[\n\t\t\t{ name: 'textColor', property: 'color' },\n\t\t\t{ name: 'backgroundColor', className: 'background-color' },\n\t\t],\n\t\t{\n\t\t\tcontrastCheckers: [\n\t\t\t\t{\n\t\t\t\t\tbackgroundColor: true,\n\t\t\t\t\ttextColor: true,\n\t\t\t\t\tfontSize: fontSize.size,\n\t\t\t\t},\n\t\t\t],\n\t\t\tcolorDetector: { targetRef: ref },\n\t\t\tcolorPanelProps: {\n\t\t\t\tinitialOpen: true,\n\t\t\t},\n\t\t},\n\t\t[ fontSize.size ]\n\t);\n\n\t/* eslint-enable @wordpress/no-unused-vars-before-return */\n\tconst { navigatorToolbarButton, navigatorModal } = useBlockNavigator(\n\t\tclientId\n\t);\n\n\t// Builds navigation links from default Pages.\n\tconst defaultPagesNavigationItems = useMemo( () => {\n\t\tif ( ! pages ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn pages.map( ( { title, type, link: url, id } ) =>\n\t\t\tcreateBlock( 'core/navigation-link', {\n\t\t\t\ttype,\n\t\t\t\tid,\n\t\t\t\turl,\n\t\t\t\tlabel: ! title.rendered\n\t\t\t\t\t? __( '(no title)' )\n\t\t\t\t\t: escape( title.rendered ),\n\t\t\t\ttitle: ! title.raw ? __( '(no title)' ) : escape( title.raw ),\n\t\t\t\topensInNewTab: false,\n\t\t\t} )\n\t\t);\n\t}, [ pages ] );\n\n\t//\n\t// HANDLERS\n\t//\n\tfunction handleItemsAlignment( align ) {\n\t\treturn () => {\n\t\t\tconst itemsJustification =\n\t\t\t\tattributes.itemsJustification === align ? undefined : align;\n\t\t\tsetAttributes( {\n\t\t\t\titemsJustification,\n\t\t\t} );\n\t\t};\n\t}\n\n\tfunction handleCreateEmpty() {\n\t\tconst emptyNavLinkBlock = createBlock( 'core/navigation-link' );\n\t\tupdateNavItemBlocks( [ emptyNavLinkBlock ] );\n\t}\n\n\tfunction handleCreateFromExistingPages() {\n\t\tupdateNavItemBlocks( defaultPagesNavigationItems );\n\t\tselectBlock( clientId );\n\t}\n\n\tconst hasPages = hasResolvedPages && pages && pages.length;\n\n\tconst blockClassNames = classnames( 'wp-block-navigation', {\n\t\t[ `items-justification-${ attributes.itemsJustification }` ]: attributes.itemsJustification,\n\t\t[ fontSize.class ]: fontSize.class,\n\t} );\n\tconst blockInlineStyles = {\n\t\tfontSize: fontSize.size ? fontSize.size + 'px' : undefined,\n\t};\n\n\t// If we don't have existing items or the User hasn't\n\t// indicated they want to automatically add top level Pages\n\t// then show the Placeholder\n\tif ( ! hasExistingNavItems ) {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Placeholder\n\t\t\t\t\tclassName=\"wp-block-navigation-placeholder\"\n\t\t\t\t\ticon=\"menu\"\n\t\t\t\t\tlabel={ __( 'Navigation' ) }\n\t\t\t\t\tinstructions={ __(\n\t\t\t\t\t\t'Create a Navigation from all existing pages, or create an empty one.'\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\tclassName=\"wp-block-navigation-placeholder__buttons\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\tclassName=\"wp-block-navigation-placeholder__button\"\n\t\t\t\t\t\t\tonClick={ handleCreateFromExistingPages }\n\t\t\t\t\t\t\tdisabled={ ! hasPages }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create from all top-level pages' ) }\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisLink\n\t\t\t\t\t\t\tclassName=\"wp-block-navigation-placeholder__button\"\n\t\t\t\t\t\t\tonClick={ handleCreateEmpty }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create empty' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</Placeholder>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\t// UI State: rendered Block UI\n\treturn (\n\t\t<Fragment>\n\t\t\t<BlockControls>\n\t\t\t\t<Toolbar\n\t\t\t\t\ticon={\n\t\t\t\t\t\tattributes.itemsJustification\n\t\t\t\t\t\t\t? navIcons[\n\t\t\t\t\t\t\t\t\t`justify${ upperFirst(\n\t\t\t\t\t\t\t\t\t\tattributes.itemsJustification\n\t\t\t\t\t\t\t\t\t) }Icon`\n\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t: navIcons.justifyLeftIcon\n\t\t\t\t\t}\n\t\t\t\t\tlabel={ __( 'Change items justification' ) }\n\t\t\t\t\tisCollapsed\n\t\t\t\t\tcontrols={ [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: navIcons.justifyLeftIcon,\n\t\t\t\t\t\t\ttitle: __( 'Justify items left' ),\n\t\t\t\t\t\t\tisActive: 'left' === attributes.itemsJustification,\n\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'left' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: navIcons.justifyCenterIcon,\n\t\t\t\t\t\t\ttitle: __( 'Justify items center' ),\n\t\t\t\t\t\t\tisActive:\n\t\t\t\t\t\t\t\t'center' === attributes.itemsJustification,\n\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'center' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: navIcons.justifyRightIcon,\n\t\t\t\t\t\t\ttitle: __( 'Justify items right' ),\n\t\t\t\t\t\t\tisActive: 'right' === attributes.itemsJustification,\n\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'right' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t] }\n\t\t\t\t/>\n\t\t\t\t<ToolbarGroup>{ navigatorToolbarButton }</ToolbarGroup>\n\n\t\t\t\t<BlockColorsStyleSelector\n\t\t\t\t\tTextColor={ TextColor }\n\t\t\t\t\tBackgroundColor={ BackgroundColor }\n\t\t\t\t>\n\t\t\t\t\t{ ColorPanel }\n\t\t\t\t</BlockColorsStyleSelector>\n\t\t\t</BlockControls>\n\t\t\t{ navigatorModal }\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Navigation Structure' ) }>\n\t\t\t\t\t<BlockNavigationList clientId={ clientId } />\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody title={ __( 'Text settings' ) }>\n\t\t\t\t\t<FontSizePicker\n\t\t\t\t\t\tvalue={ fontSize.size }\n\t\t\t\t\t\tonChange={ setFontSize }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t{ InspectorControlsColorPanel }\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Display settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tchecked={ attributes.showSubmenuIcon }\n\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\tsetAttributes( { showSubmenuIcon: value } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tlabel={ __( 'Show submenu icon for top-level items' ) }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<TextColor>\n\t\t\t\t<BackgroundColor>\n\t\t\t\t\t<div\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\tclassName={ blockClassNames }\n\t\t\t\t\t\tstyle={ blockInlineStyles }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ! hasExistingNavItems && isRequestingPages && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Spinner /> { __( 'Loading Navigation…' ) }{ ' ' }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t<InnerBlocks\n\t\t\t\t\t\t\tallowedBlocks={ [ 'core/navigation-link' ] }\n\t\t\t\t\t\t\ttemplateInsertUpdatesSelection={ false }\n\t\t\t\t\t\t\t__experimentalMoverDirection={ 'horizontal' }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</BackgroundColor>\n\t\t\t</TextColor>\n\t\t</Fragment>\n\t);\n}\n\nexport default compose( [\n\twithFontSizes( 'fontSize' ),\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst innerBlocks = select( 'core/block-editor' ).getBlocks( clientId );\n\n\t\tconst filterDefaultPages = {\n\t\t\tparent: 0,\n\t\t\torder: 'asc',\n\t\t\torderby: 'id',\n\t\t};\n\n\t\tconst pagesSelect = [\n\t\t\t'core',\n\t\t\t'getEntityRecords',\n\t\t\t[ 'postType', 'page', filterDefaultPages ],\n\t\t];\n\n\t\treturn {\n\t\t\thasExistingNavItems: !! innerBlocks.length,\n\t\t\tpages: select( 'core' ).getEntityRecords(\n\t\t\t\t'postType',\n\t\t\t\t'page',\n\t\t\t\tfilterDefaultPages\n\t\t\t),\n\t\t\tisRequestingPages: select( 'core/data' ).isResolving(\n\t\t\t\t...pagesSelect\n\t\t\t),\n\t\t\thasResolvedPages: select( 'core/data' ).hasFinishedResolution(\n\t\t\t\t...pagesSelect\n\t\t\t),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\treturn {\n\t\t\tupdateNavItemBlocks( blocks ) {\n\t\t\t\tdispatch( 'core/block-editor' ).replaceInnerBlocks(\n\t\t\t\t\tclientId,\n\t\t\t\t\tblocks\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\t} ),\n] )( Navigation );\n"]}