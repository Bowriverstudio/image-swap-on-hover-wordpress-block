{"version":3,"sources":["@wordpress/block-library/src/latest-posts/edit.js"],"names":["CATEGORIES_LIST_QUERY","per_page","MAX_POSTS_COLUMNS","LatestPostsEdit","arguments","state","categoriesList","isStillMounted","fetchRequest","path","then","setState","catch","props","attributes","setAttributes","latestPosts","displayPostContentRadio","displayPostContent","displayPostDate","postLayout","columns","order","orderBy","categories","postsToShow","excerptLength","inspectorControls","value","label","undefined","hasPosts","Math","min","length","Array","isArray","displayPosts","slice","layoutControls","icon","title","onClick","isActive","dateFormat","formats","date","className","map","post","i","titleTrimmed","rendered","trim","excerpt","raw","content","excerptElement","document","createElement","innerHTML","textContent","innerText","link","date_gmt","split","join","Component","select","getEntityRecords","latestPostsQuery","orderby"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { isUndefined, pickBy } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Component, RawHTML } from '@wordpress/element';\nimport {\n\tPanelBody,\n\tPlaceholder,\n\tQueryControls,\n\tRadioControl,\n\tRangeControl,\n\tSpinner,\n\tToggleControl,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\nimport { __ } from '@wordpress/i18n';\nimport { dateI18n, format, __experimentalGetSettings } from '@wordpress/date';\nimport { InspectorControls, BlockControls } from '@wordpress/block-editor';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Module Constants\n */\nconst CATEGORIES_LIST_QUERY = {\n\tper_page: -1,\n};\nconst MAX_POSTS_COLUMNS = 6;\n\nclass LatestPostsEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tcategoriesList: [],\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.isStillMounted = true;\n\t\tthis.fetchRequest = apiFetch( {\n\t\t\tpath: addQueryArgs( `/wp/v2/categories`, CATEGORIES_LIST_QUERY ),\n\t\t} )\n\t\t\t.then( ( categoriesList ) => {\n\t\t\t\tif ( this.isStillMounted ) {\n\t\t\t\t\tthis.setState( { categoriesList } );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( () => {\n\t\t\t\tif ( this.isStillMounted ) {\n\t\t\t\t\tthis.setState( { categoriesList: [] } );\n\t\t\t\t}\n\t\t\t} );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.isStillMounted = false;\n\t}\n\n\trender() {\n\t\tconst { attributes, setAttributes, latestPosts } = this.props;\n\t\tconst { categoriesList } = this.state;\n\t\tconst {\n\t\t\tdisplayPostContentRadio,\n\t\t\tdisplayPostContent,\n\t\t\tdisplayPostDate,\n\t\t\tpostLayout,\n\t\t\tcolumns,\n\t\t\torder,\n\t\t\torderBy,\n\t\t\tcategories,\n\t\t\tpostsToShow,\n\t\t\texcerptLength,\n\t\t} = attributes;\n\n\t\tconst inspectorControls = (\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Post content settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Post Content' ) }\n\t\t\t\t\t\tchecked={ displayPostContent }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { displayPostContent: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t{ displayPostContent && (\n\t\t\t\t\t\t<RadioControl\n\t\t\t\t\t\t\tlabel={ __( 'Show:' ) }\n\t\t\t\t\t\t\tselected={ displayPostContentRadio }\n\t\t\t\t\t\t\toptions={ [\n\t\t\t\t\t\t\t\t{ label: __( 'Excerpt' ), value: 'excerpt' },\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: __( 'Full Post' ),\n\t\t\t\t\t\t\t\t\tvalue: 'full_post',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tdisplayPostContentRadio: value,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ displayPostContent &&\n\t\t\t\t\t\tdisplayPostContentRadio === 'excerpt' && (\n\t\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\t\tlabel={ __( 'Max number of words in excerpt' ) }\n\t\t\t\t\t\t\t\tvalue={ excerptLength }\n\t\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\t\tsetAttributes( { excerptLength: value } )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmin={ 10 }\n\t\t\t\t\t\t\t\tmax={ 100 }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\n\t\t\t\t<PanelBody title={ __( 'Post meta settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Display post date' ) }\n\t\t\t\t\t\tchecked={ displayPostDate }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { displayPostDate: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\n\t\t\t\t<PanelBody title={ __( 'Sorting and filtering' ) }>\n\t\t\t\t\t<QueryControls\n\t\t\t\t\t\t{ ...{ order, orderBy } }\n\t\t\t\t\t\tnumberOfItems={ postsToShow }\n\t\t\t\t\t\tcategoriesList={ categoriesList }\n\t\t\t\t\t\tselectedCategoryId={ categories }\n\t\t\t\t\t\tonOrderChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { order: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonOrderByChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { orderBy: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonCategoryChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\tcategories: '' !== value ? value : undefined,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonNumberOfItemsChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { postsToShow: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t{ postLayout === 'grid' && (\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Columns' ) }\n\t\t\t\t\t\t\tvalue={ columns }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { columns: value } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmin={ 2 }\n\t\t\t\t\t\t\tmax={\n\t\t\t\t\t\t\t\t! hasPosts\n\t\t\t\t\t\t\t\t\t? MAX_POSTS_COLUMNS\n\t\t\t\t\t\t\t\t\t: Math.min(\n\t\t\t\t\t\t\t\t\t\t\tMAX_POSTS_COLUMNS,\n\t\t\t\t\t\t\t\t\t\t\tlatestPosts.length\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t);\n\n\t\tconst hasPosts = Array.isArray( latestPosts ) && latestPosts.length;\n\t\tif ( ! hasPosts ) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t{ inspectorControls }\n\t\t\t\t\t<Placeholder\n\t\t\t\t\t\ticon=\"admin-post\"\n\t\t\t\t\t\tlabel={ __( 'Latest Posts' ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ! Array.isArray( latestPosts ) ? (\n\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t__( 'No posts found.' )\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Placeholder>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\n\t\t// Removing posts from display should be instant.\n\t\tconst displayPosts =\n\t\t\tlatestPosts.length > postsToShow\n\t\t\t\t? latestPosts.slice( 0, postsToShow )\n\t\t\t\t: latestPosts;\n\n\t\tconst layoutControls = [\n\t\t\t{\n\t\t\t\ticon: 'list-view',\n\t\t\t\ttitle: __( 'List view' ),\n\t\t\t\tonClick: () => setAttributes( { postLayout: 'list' } ),\n\t\t\t\tisActive: postLayout === 'list',\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: 'grid-view',\n\t\t\t\ttitle: __( 'Grid view' ),\n\t\t\t\tonClick: () => setAttributes( { postLayout: 'grid' } ),\n\t\t\t\tisActive: postLayout === 'grid',\n\t\t\t},\n\t\t];\n\n\t\tconst dateFormat = __experimentalGetSettings().formats.date;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ inspectorControls }\n\t\t\t\t<BlockControls>\n\t\t\t\t\t<ToolbarGroup controls={ layoutControls } />\n\t\t\t\t</BlockControls>\n\t\t\t\t<ul\n\t\t\t\t\tclassName={ classnames( this.props.className, {\n\t\t\t\t\t\t'wp-block-latest-posts__list': true,\n\t\t\t\t\t\t'is-grid': postLayout === 'grid',\n\t\t\t\t\t\t'has-dates': displayPostDate,\n\t\t\t\t\t\t[ `columns-${ columns }` ]: postLayout === 'grid',\n\t\t\t\t\t} ) }\n\t\t\t\t>\n\t\t\t\t\t{ displayPosts.map( ( post, i ) => {\n\t\t\t\t\t\tconst titleTrimmed = post.title.rendered.trim();\n\t\t\t\t\t\tlet excerpt = post.excerpt.rendered;\n\t\t\t\t\t\tif ( post.excerpt.raw === '' ) {\n\t\t\t\t\t\t\texcerpt = post.content.raw;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst excerptElement = document.createElement( 'div' );\n\t\t\t\t\t\texcerptElement.innerHTML = excerpt;\n\t\t\t\t\t\texcerpt =\n\t\t\t\t\t\t\texcerptElement.textContent ||\n\t\t\t\t\t\t\texcerptElement.innerText ||\n\t\t\t\t\t\t\t'';\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li key={ i }>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={ post.link }\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\trel=\"noreferrer noopener\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ titleTrimmed ? (\n\t\t\t\t\t\t\t\t\t\t<RawHTML>{ titleTrimmed }</RawHTML>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t__( '(no title)' )\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t{ displayPostDate && post.date_gmt && (\n\t\t\t\t\t\t\t\t\t<time\n\t\t\t\t\t\t\t\t\t\tdateTime={ format(\n\t\t\t\t\t\t\t\t\t\t\t'c',\n\t\t\t\t\t\t\t\t\t\t\tpost.date_gmt\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\tclassName=\"wp-block-latest-posts__post-date\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ dateI18n(\n\t\t\t\t\t\t\t\t\t\t\tdateFormat,\n\t\t\t\t\t\t\t\t\t\t\tpost.date_gmt\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</time>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ displayPostContent &&\n\t\t\t\t\t\t\t\t\tdisplayPostContentRadio === 'excerpt' && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"wp-block-latest-posts__post-excerpt\">\n\t\t\t\t\t\t\t\t\t\t\t<RawHTML key=\"html\">\n\t\t\t\t\t\t\t\t\t\t\t\t{ excerptLength <\n\t\t\t\t\t\t\t\t\t\t\t\texcerpt.trim().split( ' ' )\n\t\t\t\t\t\t\t\t\t\t\t\t\t.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t? excerpt\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t' ',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texcerptLength\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.join( ' ' ) +\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ' ... <a href=' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t  post.link +\n\t\t\t\t\t\t\t\t\t\t\t\t\t  'target=\"_blank\" rel=\"noopener noreferrer\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t  __( 'Read more' ) +\n\t\t\t\t\t\t\t\t\t\t\t\t\t  '</a>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: excerpt\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t' ',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texcerptLength\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.join( ' ' ) }\n\t\t\t\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ displayPostContent &&\n\t\t\t\t\t\t\t\t\tdisplayPostContentRadio === 'full_post' && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"wp-block-latest-posts__post-full-content\">\n\t\t\t\t\t\t\t\t\t\t\t<RawHTML key=\"html\">\n\t\t\t\t\t\t\t\t\t\t\t\t{ post.content.raw.trim() }\n\t\t\t\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t} ) }\n\t\t\t\t</ul>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default withSelect( ( select, props ) => {\n\tconst { postsToShow, order, orderBy, categories } = props.attributes;\n\tconst { getEntityRecords } = select( 'core' );\n\tconst latestPostsQuery = pickBy(\n\t\t{\n\t\t\tcategories,\n\t\t\torder,\n\t\t\torderby: orderBy,\n\t\t\tper_page: postsToShow,\n\t\t},\n\t\t( value ) => ! isUndefined( value )\n\t);\n\treturn {\n\t\tlatestPosts: getEntityRecords( 'postType', 'post', latestPostsQuery ),\n\t};\n} )( LatestPostsEdit );\n"]}